#!/data/data/com.termux/files/usr/bin/bash

if [ $# = 0 -o "$1" = "-h" ]; then
    echo 'Usage: termux-fix-shebang <files>'
    echo
    echo 'Rewrite shebangs in specified files for running'
    echo 'under Termux.'
    exit 1
fi

for file in "$@"; do
    if [ -f "${file}" ]; then
        sed -i -E "1 s@^#\s*\!.*/[sx]?bin/(.*)@#\!/data/data/com.termux/files/usr/bin/\1@" "${file}"
    fi
done
